<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Security Reporting Tool</title>
<style>
body{
    font-family: 'Roboto', sans-serif;
    background: url('background.jpg') no-repeat center center fixed;
    background-size: cover;
    color:white;
    padding:20px;
    animation: fadein 1s;
}
@keyframes fadein {
    from {opacity: 0;}
    to {opacity: 1;}
}
.container{
    max-width:1000px;
    margin:auto;
    background:rgba(0,0,0,0.75);
    padding:30px;
    border-radius:15px;
    box-shadow:0 0 20px rgba(0,0,0,0.5);
}
h1{text-align:center;color:#ffd700;margin-bottom:20px;text-shadow:1px 1px 2px black;}
select,input,textarea,button{
    width:100%;padding:10px;margin-bottom:10px;border-radius:8px;border:none;font-size:16px;
}
textarea{resize:vertical;min-height:120px;}
button{
    background:#ff4500;color:white;font-weight:bold;cursor:pointer;transition:0.3s;
}
button:hover{background:#ffa500;}
.report-output{
    background:rgba(255,255,255,0.1);
    padding:20px;
    border-radius:10px;
    min-height:200px;
    white-space:pre-line;
    margin-top:20px;
    animation: slidein 0.5s;
}
@keyframes slidein {
    from {opacity:0;transform:translateY(20px);}
    to {opacity:1;transform:translateY(0);}
}
.disclaimer{
    margin-top:20px;padding:15px;border-left:5px solid #ff0000;background:rgba(255,0,0,0.1);
    font-weight:bold;color:white;
}
.contact-btn{
    margin-top:10px;
    background:#00bfff;
}
.contact-btn:hover{background:#1e90ff;}
.field-container{margin-bottom:15px;}
.field-container label{display:block;font-weight:500;margin-bottom:5px;}
</style>
</head>
<body>
<div class="container">
<h1>Security Reporting Format</h1>

<div class="field-container">
<label>Select Report Type</label>
<select id="reportType">
<option value="">--Choose Report Type--</option>
<option value="vehicle">Vehicle Entry Report</option>
<option value="contractor">Contractor Activity Report</option>
<option value="fire">Fire Alarm Report</option>
<option value="cleaning">Cleaning / Request Report</option>
<option value="tenant">Tenant Headcount Report</option>
<option value="generalHeadcount">General Headcount Report</option>
<option value="patrolling">Patrolling Report</option>
</select>
</div>

<div id="dynamicFields"></div>
<button id="generateBtn">Generate Report</button>
<div class="report-output" id="reportOutput"></div>

<div class="disclaimer">
‚ö†Ô∏è This tool is fully offline, built with HTML, CSS, and JavaScript, and does not store any data.
</div>
<button class="contact-btn" onclick="window.location.href='mailto:arslankhan807567@gmail.com'">Contact Developer</button>
</div>

<script>
// --- Utility Functions ---
function normalizeTon(input){
    if(!input) return 0;
    let str = input.toString().toLowerCase().replace(/[^0-9]/g,'');
    return parseInt(str)||0;
}
function normalizeYesNo(input){
    if(!input) return false;
    input = input.toString().toLowerCase();
    return (['yes','y','true','valid'].includes(input));
}
function autoCapitalize(str){
    if(!str) return '';
    return str.split(' ').map(w=>w.charAt(0).toUpperCase()+w.slice(1)).join(' ');
}
function fixTypos(str){
    if(!str) return '';
    const corrections = {
        'drver':'Driver',
        'contrctor':'Contractor',
        'comapny':'Company',
        'delivry':'Delivery',
        'collecton':'Collection',
        'ptw':'PTW',
        'dms':'DMS',
        'veihcle':'Vehicle'
    };
    for(let key in corrections){
        let regex = new RegExp(key,'gi');
        str = str.replace(regex,corrections[key]);
    }
    return str;
}

// --- Dynamic Field Rendering ---
const reportFields={
vehicle:[
{id:'location',label:'Location',placeholder:'Type exact location'},
{id:'purpose',label:'Purpose of Entrance',placeholder:'e.g., Material Collection'},
{id:'destination',label:'Vehicle Destination',placeholder:'Where is the vehicle heading?'},
{id:'vehicleNumber',label:'Vehicle Number',placeholder:'Enter VRN'},
{id:'vehicleType',label:'Vehicle Type & Weight (e.g., 10 ton)',placeholder:'Type vehicle type and weight'},
{id:'driverName',label:'Driver Name',placeholder:'Full name'},
{id:'driverContact',label:'Driver Contact',placeholder:'Phone number'},
{id:'company',label:'Company Name',placeholder:'Contractor/Company name'},
{id:'inCharge',label:'In-Charge Name',placeholder:'Person in charge'},
{id:'inChargeContact',label:'In-Charge Contact',placeholder:'Phone number'},
{id:'dmsValid',label:'DMS Valid? (Yes/No)',placeholder:'Yes or No'},
{id:'radioCall',label:'Radio Call Sign',placeholder:'e.g., S-152'}
],
contractor:[
{id:'location',label:'Location',placeholder:'Type exact location'},
{id:'contractorName',label:'Contractor Name',placeholder:'Enter contractor name'},
{id:'company',label:'Company Name',placeholder:'Company name'},
{id:'inCharge',label:'In-Charge Name',placeholder:'Person in charge'},
{id:'inChargeContact',label:'In-Charge Contact',placeholder:'Phone number'},
{id:'activity',label:'Activity Description',placeholder:'Type activity'},
{id:'ptwValid',label:'PTW Valid? (Yes/No)',placeholder:'Yes or No'},
{id:'radioCall',label:'Radio Call Sign',placeholder:'e.g., S-122'}
],
fire:[
{id:'location',label:'Location',placeholder:'Exact location of alarm'},
{id:'activatedTime',label:'Activated Time',placeholder:'HH:MM:SS'},
{id:'ackTime',label:'Acknowledged Time',placeholder:'HH:MM:SS'},
{id:'silenceTime',label:'Silence Time',placeholder:'HH:MM:SS'},
{id:'resetTime',label:'Reset Time',placeholder:'HH:MM:SS'},
{id:'fireLocation',label:'Fire Alarm Location',placeholder:'Sensor ID / location'},
{id:'nature',label:'Nature of Fire Alarm',placeholder:'False Alarm / Smoke / Fire'},
{id:'cause',label:'Cause of Fire Alarm',placeholder:'e.g., Dust, Malfunction'},
{id:'responderName',label:'Responder Name',placeholder:'Enter name'},
{id:'responderContact',label:'Responder Contact',placeholder:'Phone number'},
{id:'arrivalTime',label:'Responder Arrival Time',placeholder:'HH:MM:SS'},
{id:'remarks',label:'Remarks',placeholder:'e.g., Situation back to normal'},
{id:'radioCall',label:'Radio Call Sign',placeholder:'e.g., S-111'}
],
cleaning:[
{id:'requestorName',label:'Requestor Name',placeholder:'Full Name'},
{id:'requestorEmail',label:'Requestor Email',placeholder:'Email address'},
{id:'requestorContact',label:'Requestor Contact',placeholder:'Phone number'},
{id:'pocName',label:'Point of Contact Name',placeholder:'POC name'},
{id:'pocContact',label:'POC Contact',placeholder:'POC phone'},
{id:'details',label:'Details of Request',placeholder:'Explain the issue clearly'},
{id:'location',label:'Exact Location',placeholder:'Location'},
{id:'radioCall',label:'Radio Call Sign',placeholder:'e.g., S-11'}
],
tenant:[
{id:'location',label:'Location',placeholder:'Sector / Area'},
{id:'date',label:'Date',placeholder:'DD/MM/YYYY'},
{id:'duration',label:'Duration',placeholder:'HH:MM to HH:MM'},
{id:'contractors',label:'Contractors',placeholder:'Number of contractors'},
{id:'visitors',label:'Visitors',placeholder:'Number of visitors'},
{id:'hkStaff',label:'HK Staff',placeholder:'Number of housekeeping staff'},
{id:'fmStaff',label:'FM Staff',placeholder:'Number of FM staff'},
{id:'total',label:'Total HC',placeholder:'Total headcount'},
{id:'radioCall',label:'Radio Call Sign',placeholder:'e.g., OA-05'}
],
generalHeadcount:[
{id:'location',label:'Location',placeholder:'Exact location'},
{id:'date',label:'Date',placeholder:'DD/MM/YYYY'},
{id:'time',label:'Time',placeholder:'HH:MM to HH:MM'},
{id:'total',label:'Total HC',placeholder:'Total headcount'},
{id:'radioCall',label:'Radio Call Sign',placeholder:'e.g., S-122'}
],
patrolling:[
{id:'location',label:'Location',placeholder:'Exact location'},
{id:'date',label:'Date',placeholder:'DD/MM/YYYY'},
{id:'time',label:'Time',placeholder:'HH:MM'},
{id:'observations',label:'Observations / Description',placeholder:'Type all observations here'},
{id:'radioCall',label:'Radio Call Sign',placeholder:'e.g., S-122'}
]
};

// --- Render slots dynamically ---
const dynamicFieldsDiv=document.getElementById('dynamicFields');
document.getElementById('reportType').addEventListener('change',function(){
dynamicFieldsDiv.innerHTML='';
const type=this.value;
if(!type) return;
reportFields[type].forEach(field=>{
    const div=document.createElement('div');
    div.className='field-container';
    div.innerHTML=`<label for="${field.id}">${field.label}</label>
    <input type="text" id="${field.id}" placeholder="${field.placeholder}">`;
    dynamicFieldsDiv.appendChild(div);
});
});

// --- Generate report ---
document.getElementById('generateBtn').addEventListener('click',function(){
const type=document.getElementById('reportType').value;
if(!type){alert('Please select report type');return;}
let data={};
reportFields[type].forEach(f=>{
    data[f.id]=document.getElementById(f.id)?.value.trim();
});
const now=new Date();
const dateStr=now.toLocaleDateString('en-GB');
const timeStr=now.toLocaleTimeString('en-GB');
let reportText='';

// --- VEHICLE ---
if(type==='vehicle'){
    const weight=normalizeTon(data.vehicleType);
    const tireProtection=(weight>=3)?'using tire protection as well':'';
    const dmsStatus=normalizeYesNo(data.dmsValid)?'with valid DMS':`without valid DMS (Permission by ${data.radioCall})`;
    reportText=`Date :- ${dateStr}   Time :- ${timeStr}
Location :- ${autoCapitalize(fixTypos(data.location))}
Subject :- Vehicle Access

Description:-
Granted access to one ${weight} ton ${fixTypos(data.vehicleType)} heading towards ${fixTypos(data.destination)} for ${fixTypos(data.purpose)} ${dmsStatus} and escorted by flagman ${tireProtection}.

Driver Details :-
Name :- ${autoCapitalize(fixTypos(data.driverName))}
Contact :- ${data.driverContact}
VRN :- ${data.vehicleNumber}

Company :- ${autoCapitalize(fixTypos(data.company))}
In-Charge :- ${autoCapitalize(fixTypos(data.inCharge))}
In-Charge Contact :- ${data.inChargeContact}

Regards.
${data.radioCall || ''}`;
}

// --- CONTRACTOR ---
else if(type==='contractor'){
    const ptwStatus=normalizeYesNo(data.ptwValid);
    const ptwText=ptwStatus?'The activity is with a valid work permit (PTW).':`Contractors are working without a valid PTW with permission of ${data.radioCall}`;
    reportText=`FYI

Date: ${dateStr}   Time: ${timeStr}
Location: ${autoCapitalize(fixTypos(data.location))}

Subject: Contractor Activity

Details:-
Kindly be informed that the ${autoCapitalize(fixTypos(data.contractorName))} is carrying out ${fixTypos(data.activity)} at the above location. ${ptwText}

In-Charge Details:
Name: ${autoCapitalize(fixTypos(data.inCharge))}
Contact: ${data.inChargeContact}
Company: ${autoCapitalize(fixTypos(data.company))}

Regards,
${data.radioCall || ''}`;
}

// --- FIRE ---
else if(type==='fire'){
    reportText=`*FIRE ALARM REPORT üö®*

FYI Team

Date: ${dateStr}   Location: ${autoCapitalize(fixTypos(data.location))}
ACTIVATED TIME: ${data.activatedTime || timeStr}
ACK TIME: ${data.ackTime || timeStr}
SILENCE TIME: ${data.silenceTime || timeStr}
RESETED TIME: ${data.resetTime || timeStr}

Fire Alarm Location: ${autoCapitalize(fixTypos(data.fireLocation))}
Nature of Fire Alarm: ${data.nature || 'False Alarm'}
Cause of Fire Alarm: ${data.cause || 'Unknown'}

RESPONDER DETAILS:-
Name: ${autoCapitalize(fixTypos(data.responderName))}
Contact: ${data.responderContact}
Arrival Time: ${data.arrivalTime || timeStr}

Remarks: ${data.remarks || 'Situation back to normal'}

Regards
${data.radioCall || ''}`;
}

// --- CLEANING / REQUEST ---
else if(type==='cleaning'){
    reportText=`Requestor Name : ${autoCapitalize(fixTypos(data.requestorName))}
Requestor Email Address : ${data.requestorEmail}
Requestor Contact : ${data.requestorContact}

POC : ${autoCapitalize(fixTypos(data.pocName))}
POC Number : ${data.pocContact}

Details of the Request :  ${fixTypos(data.details)}

Exact location of request : ${autoCapitalize(fixTypos(data.location))}

Regards
${data.radioCall || ''}`;
}

// --- TENANT HEADCOUNT ---
else if(type==='tenant'){
    reportText=`*Hourly Visitors Headcount*

Date: ${data.date || dateStr}
Duration: ${data.duration || 'Unknown'}

Contractors: ${data.contractors || '0'}
Visitors: ${data.visitors || '0'}
HK Staff: ${data.hkStaff || '0'}
FM Staff: ${data.fmStaff || '0'}

Total HC: ${data.total || '0'}

Regards
${data.radioCall || ''}`;
}

// --- GENERAL HEADCOUNT ---
else if(type==='generalHeadcount'){
    reportText=`Hourly Visitors Headcount Report

Location : ${autoCapitalize(fixTypos(data.location))}
Date : ${data.date || dateStr}
Time : ${data.time || 'Unknown'}
Total HC : ${data.total || '0'}

Regards,
${data.radioCall || ''}`;
}

// --- PATROLLING ---
else if(type==='patrolling'){
    reportText=`FYI

Date: ${data.date || dateStr}
Time: ${data.time || timeStr}
Location: ${autoCapitalize(fixTypos(data.location))}

Subject: Initial Patrolling Report

Description:
${fixTypos(data.observations)}

Regards,
${data.radioCall || ''}`;
}

document.getElementById('reportOutput').textContent=reportText;
});
</script>
</body>
</html>
